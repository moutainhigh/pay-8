<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sogou.pay.service.dao.PayTransferLogDao">

    <resultMap id="payTransferLogMap" type="com.sogou.pay.service.entity.PayTransferLog" autoMapping="true">
        <result column="id" property="id"/>
        <result column="create_time" property="createTime"/>
        <result column="status" property="status"/>
        <result column="serial" property="serial"/>
        <result column="batch_no" property="batch_no"/>
        <result column="remark" property="remark"/>
    </resultMap>

    <sql id="tableColumns">
        id,create_time,status,serial,batch_no,remark
    </sql>

    <insert id="insert" parameterType="PayTransferLog">
        INSERT INTO t_pay_transfer_log (
           create_time,status,serial,batch_no,remark
        )
        VALUES (
        now(),#{status},#{serial},#{batchNo},#{remark}
        )
    </insert>

    <insert id="batchInsert" parameterType="java.util.List">
        INSERT INTO t_pay_transfer_log (
        create_time,status,serial,batch_no,remark
        )
        VALUES
        <foreach collection="list" item="obj" index="index" separator=",">
            (
            now(),#{obj.status},#{obj.serial},#{obj.batchNo},#{obj.remark}
            )
        </foreach>
    </insert>

    <select id="queryNumByStatusAndBatchNo" resultType="int">
        SELECT
        <include refid="tableColumns"/>
        FROM t_pay_transfer_log
        WHERE status = #{status} and batch_no=#{batchNo}
    </select>

</mapper>