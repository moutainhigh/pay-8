<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sogou.pay.service.dao.ChannelAdaptDao">

    <resultMap type="com.sogou.pay.manager.model.CommonAdaptModel" id="commonAdaptModel">
        <result column="low_limit" property="lowLimit" />
        <result column="high_limit" property="highLimit" />
        <result column="limit_info" property="limitInfo" />
        <result column="channel_code" property="channelCode"/>
        <result column="channel_type" property="channelType"/>
        <result column="bank_card_type" property="bankCardType" />
        <result column="sort" property="sort" />
        <result column="logo" property="logo"/>
        <result column="channel_name" property="bankName"/>
    </resultMap>

    <cache eviction="LRU" type="com.sogou.pay.common.cache.MybatisRedisCache"/>

    <!-- 获取业务平台全部银行适配列表-->
    <select id="getChannelAdaptList" resultMap="commonAdaptModel">
        SELECT channel.channel_name,channel.logo,channel.low_limit,channel.high_limit,channel.limit_info,adapt.channel_code,
         adapt.channel_type,adapt.bank_card_type,adapt.sort
         from t_pay_channel_info channel  left join t_pay_channel_adapt adapt
         on adapt.channel_code = channel.channel_code
         where adapt.status = 1 and app_id=#{appId} and (access_platform = #{accessPlatform} or access_platform="99")
         ORDER BY SORT
    </select>


</mapper>